\chapter{M\'etodos}

Nuestro objetivo es parcelar la corteza cerebral mediante un criterio estructural.
En particular, utilizando una imagen de difusi\'on, queremos generar \'areas 
mediante el agrupamiento de tractogramas. Para ello es necesario primero seleccionar
los voxels que ser\'an utilizados como semilla de cada tractograma; luego generarlos
y finalmente agruparlos usando alg\'un algoritmo de clustering.  \\

\section{Adquisici\'on de datos}

Descargamos lo datos de X sujetos, todos (caracter\'isticas) del sitio web 
de \textit{Human Connectome Project}. Las ventajas de utilizar estos datos son muchas:
Tanto la imagen de difusi\'on como la anat\'omica se encuentran ya preprocesadas;
cada sujeto posee una parcelaci\'on que entre otras cosas permite separar la materia
blanca de la gris; cada sujeto posee un archivo en formato \textit{Gifti} que
representan la corteza, permitiendo visualizar un modelo en tres dimensiones
de la misma sencillamente, y una representaci\'on tambi\'en en \textit{Gifti} 
de la parcelaci\'on de dicha corteza. \\

\input{metodos/tractografia.tex}

\input{metodos/semillas.tex}

\section{Generando tractogramas}

Partiendo desde la corteza situamos semillas en la materia blanca de cada 
sujeto a $3mm$ de profundidad. Por cada semilla simulamos el recorrido de quince
mil part\'iculas de agua a traves de la materia blanca. En base a los \textit{streamlines}
resultantes se crearon mapas de visitas para cada semilla. Un mapa de visitas es
una imagen donde cada voxel posee el n\'umero de \textit{streams} que lo conectan
con la semilla. Si uno dividiera cada valor de este mapa por la cantidad de
part\'iculas utilizadas obtendr\'ia un tractograma. Sin embargo, por lo dicho en
la secci\'on \ref{sec:estabilidad}, este m\'etodo posee un sesgo respecto a la
distancia. Para evitarlo usamos la transformaci\'on propuesta en Moreno-Dominguez et
al. \cite{Moreno-Dominguez2014}:

$$ T_i = log(M_i + 1)/log(p+1) $$

Donde $T_i$ es el valor del voxel $i$ en el tractograma resultante; $M_i$ es 
el valor del voxel $i$ en el mapa de visitar y $p$ es el n\'umero de part\'iculas
usadas. Dado que $M_i \leq p \forall i$ cada voxel del tractograma tendr\'a un 
valor entre uno y cero. Uno representa que todos los \textit{streams} pasaron 
por el voxel, mientras que cero representa que ninguno pas\'o. \\

\input{metodos/ralas.tex}

\section{Implementando el m\'etodo Moreno-Dominguez}
Ac\'a explico todo lo que hacen. Preprocesamiento de tractogramas, modificaciones
al algoritmo de clustering, preprocesamiento del clustering, preprocesamiento
de dendrograma.\\


\input{metodos/logit.tex}



